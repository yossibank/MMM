name: Build

on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - '*'

env:
  DEVELOPER_DIR: /Applications/Xcode.app

jobs:
  ci:
    name: Run Build

    runs-on: macos-latest

    steps:
      # チェックアウト(GitHubリポジトリからソース取得)
      - uses: actions/checkout@v4

      # Xcodeの一覧出力
      - name: Show Xcode List
        run: ls /Applications | grep 'Xcode'

      # Xcodeのバージョン出力
      - name: Show Xcode Version
        run: xcodebuild -version

      # 使用可能Simulatorの一覧出力
      - name: Show Simulator List
        run: xcrun simctl list devices

      # ビルド
      - name: Xcode Build
        run: set -o pipefail &&
          xcodebuild
          -sdk iphonesimulator
          -configuration Debug
          -scheme MMM
          build
